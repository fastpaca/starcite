#!/bin/sh

# Fly.io: use private IPv6 for Erlang distribution
if [ -n "$FLY_PRIVATE_IP" ]; then
  if [ -z "$RELEASE_DISTRIBUTION" ]; then
    export RELEASE_DISTRIBUTION=name
  fi

  if [ -z "$RELEASE_NODE" ]; then
    export RELEASE_NODE="${RELEASE_NODE_BASENAME:-starcite}@${FLY_PRIVATE_IP}"
  fi

  export ERL_AFLAGS="-proto_dist inet6_tcp"
fi
